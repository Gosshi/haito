# PR#17: ソート機能・配当利回り表示 - `/portfolio`ページ拡張

## 参照ドキュメント
- docs/product_phase2.md「F7: 配当利回りランキング」節
- docs/product_phase2.md「機能詳細」（L69-81）
- docs/product_phase2.md「テスト観点」（L165-166）

## 目的
`/portfolio` ページにソート機能と配当利回り表示を追加し、ポートフォリオ分析を強化する。

## 範囲

### In scope
- ソート機能追加（配当利回り、年間配当額、銘柄コード順）
- 配当利回りカラム追加（取得価格ベース）
- ポートフォリオ全体の平均配当利回り表示
- ソート状態のUI表示

### Out of scope
- 取得日カラム（DBスキーマ変更が必要なためPhase 3で検討）

## 技術固定（変更禁止）
- 既存の `components/portfolio/holdings-table.tsx` を拡張
- 配当利回り計算: `(年間配当額 / 取得価格) * 100`
- 既存の配当データ（`dividend_data` テーブル）使用

## 受け入れ条件（AC）
- [ ] `/portfolio` ページにソートドロップダウンが表示される
- [ ] ソート項目
  - 配当利回り（高い順）- デフォルト
  - 配当利回り（低い順）
  - 年間配当額（高い順）
  - 年間配当額（低い順）
  - 銘柄コード順
- [ ] ソート選択でテーブルが即座にソートされる
- [ ] 現在のソート状態がUIで明示される（アイコン等）
- [ ] 配当利回りカラムがテーブルに追加される
  - 表示形式: `4.5%`
  - 取得価格未設定時は `-` 表示
- [ ] テーブル上部に平均配当利回りを表示
  - 計算: 全銘柄の加重平均利回り
- [ ] ソートはクライアントサイドで実行（API変更不要）

## 禁止事項
- DBスキーマ変更
- APIエンドポイント変更
- 既存カラムの削除

## 成果物
1. **コード:**
   - `components/portfolio/holdings-table.tsx`（拡張）
   - `components/portfolio/sort-dropdown.tsx`
   - `components/portfolio/portfolio-summary.tsx`（平均利回り表示）
   - `lib/calculations/yield.ts`（利回り計算）
2. **PR要約:** ソート機能・配当利回り表示追加。F7 配当利回りランキング完成。Phase 2全機能完了。

## 質問（最大3つ）
なし

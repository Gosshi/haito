# テスト標準

[目的: 何をテストするか、テストの配置場所、構造化方法のガイド]

## 哲学
- 実装ではなく振る舞いをテスト
- 高速で信頼性の高いテストを優先; 脆いモックを最小化
- クリティカルパスを深くカバー; 100%追求より幅を

## 組織
オプション:
- コロケーション: `component.tsx` + `component.test.tsx`
- 分離: `/src/...`と`/tests/...`
デフォルトを選択; 根拠付きで例外を許可。

命名:
- ファイル: `*.test.*`または`*.spec.*`
- スイート: テスト対象; ケース: 期待される振る舞い

## テストタイプ
- ユニット: 単一ユニット、依存関係をモック、非常に高速
- 統合: 複数ユニットを一緒に、外部のみモック
- E2E: フルフロー、最小限のモック、クリティカルジャーニーのみ

## 構造（AAA）
```typescript
it('YのときXをする', () => {
  // Arrange
  const input = setup();
  // Act
  const result = act(input);
  // Assert
  expect(result).toEqual(expected);
});
```

## モッキングとデータ
- 外部をモック（API/DB）; テスト対象システムをモックしない
- ファクトリ/フィクスチャを使用; テスト間で状態をリセット
- テストデータは最小限で意図が明確なものに

## カバレッジ
- ターゲット: [全体の%]; クリティカルドメインはより高く
- CIでしきい値を強制; 例外はレビュー根拠が必要

---
_パターンと決定に焦点を当てる。ツール固有の設定は別の場所に。_

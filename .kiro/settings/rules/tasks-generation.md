# タスク生成ルール（Tasks Generation Rules）

本ドキュメントは、要件・設計から **実装タスク（tasks.md）を生成する際の不変ルール**を定義する。
tasks.md は「実装の手順書」であり、設計書ではない。

---

## 1. タスクの責務

- tasks は **実装作業の分解**のみを目的とする
- 設計判断・仕様追加・改善提案を含めてはいけない
- 「何を作るか」は requirements / design にのみ存在する

---

## 2. PR粒度の原則（最重要）

- 1つの tasks.md は **1PRで完結**する粒度とする
- 目安：
  - 作業時間：半日〜2日
  - ファイル変更数：限定的
- 大きすぎる場合は **tasks を増やすのではなく PR を分割**する

---

## 3. タスク分解の指針

タスクは以下の順で分解する：

1. 下準備（設定・初期化・依存整理）
2. コアロジック実装
3. UI / 画面（必要な場合のみ）
4. 認証・ガード・権限（必要な場合のみ）
5. テスト追加
6. 仕上げ（lint / 型 / 微修正）

※ 不要なステップは **書かない**

---

## 4. 禁止事項（厳守）

- 設計変更を含むタスク生成
- 「改善」「最適化」「リファクタ」など曖昧な表現
- Phase2 / 将来対応のタスク混入
- 「ついでにやる」系のタスク

---

## 5. 明確性の原則

各タスクは必ず以下を満たすこと：

- 1タスク = 1目的
- 完了条件が明確
- 実装者が迷わない具体性

悪い例：
- 「認証周りを実装する」
良い例：
- 「Supabase Auth を用いた signup / login API 呼び出しを実装する」

---

## 6. テストの扱い

- 各PRに **最低限のテストタスク**を必ず含める
- E2E が不要な場合は unit / logic テストでよい
- 「テストを書く」は1タスクとして明示する

---

## 7. 並列性の原則

- 可能な限り **依存関係が分かる順序**で並べる
- 並列可能なタスクは補足として明記してよい

---

## 8. Codex への指示（生成時）

- tasks.md は **実装順に並べる**
- 実装以外（設計・判断・提案）は書かない
- 不明点は最大3つまで「Questions」にまとめる

---

## 9. 最終原則

> **tasks.md は「考えるための文書」ではない。  
> 「そのまま実装するためのチェックリスト」である。**

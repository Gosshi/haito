# 技術設計のためのフル・ディスカバリープロセス

## 目的
技術設計が完全で正確かつ最新の情報に基づいていることを保証するため、包括的な調査と分析を実施する。

## ディスカバリーステップ

### 1. 要件分析
**要件を技術ニーズにマッピングする**
- EARS形式からすべての機能要件を抽出する
- 非機能要件（パフォーマンス、セキュリティ、スケーラビリティ）を特定する
- 技術的な制約と依存関係を明確にする
- コアとなる技術的課題をリストアップする

### 2. 既存実装の分析
**現在のシステムを理解する**（修正/拡張の場合）:
- コードベースの構造とアーキテクチャパターンを分析する
- 再利用可能なコンポーネント、サービス、ユーティリティをマッピングする
- ドメイン境界とデータフローを特定する
- インテグレーションポイントと依存関係を文書化する
- アプローチを決定する: 拡張 vs リファクタリング vs ラップ

### 3. 技術調査
**ベストプラクティスと解決策を調査する**:
- **WebSearchを使用**して以下を検索:
  - 類似問題に対する最新のアーキテクチャパターン
  - 技術スタックに関する業界のベストプラクティス
  - 関連技術の最新の更新や変更
  - よくある落とし穴と解決策

- **WebFetchを使用**して以下を分析:
  - フレームワーク/ライブラリの公式ドキュメント
  - APIリファレンスと使用例
  - マイグレーションガイドと破壊的変更
  - パフォーマンスベンチマークと比較

### 4. 外部依存関係の調査
**各外部サービス/ライブラリについて**:
- 公式ドキュメントとGitHubリポジトリを検索する
- APIシグネチャと認証方法を確認する
- 既存スタックとのバージョン互換性をチェックする
- レート制限と使用制約を調査する
- コミュニティリソースと既知の問題を見つける
- セキュリティ上の考慮事項を文書化する
- 実装調査が必要なギャップを記録する

### 5. アーキテクチャパターンと境界分析
**アーキテクチャオプションを評価する**:
- 関連するパターン（MVC、クリーン、ヘキサゴナル、イベント駆動）を比較する
- 既存のアーキテクチャおよびステアリング原則との適合性を評価する
- チーム間の競合を避けるために必要なドメイン境界とオーナーシップの境目を特定する
- スケーラビリティへの影響と運用上の懸念を考慮する
- 保守性とチームの専門知識を評価する
- 推奨パターンと却下された代替案を`research.md`に文書化する

### 6. リスク評価
**技術的リスクを特定する**:
- パフォーマンスのボトルネックとスケーリング限界
- セキュリティ脆弱性と攻撃ベクトル
- 統合の複雑さと結合度
- 技術的負債の作成 vs 解消
- 知識のギャップとトレーニングの必要性

## 調査ガイドライン

### 検索すべき場合
**必ず検索する**:
- 外部APIドキュメントと更新情報
- 認証/認可のセキュリティベストプラクティス
- 特定されたボトルネックに対するパフォーマンス最適化技術
- 依存関係の最新バージョンとマイグレーションパス

**不確かな場合は検索する**:
- 特定のユースケースに対するアーキテクチャパターン
- データフォーマット/プロトコルの業界標準
- コンプライアンス要件（GDPR、HIPAAなど）
- 想定負荷に対するスケーラビリティアプローチ

### 検索戦略
1. 公式ソース（ドキュメント、GitHub）から開始する
2. 最近のブログ記事と記事（過去6ヶ月）をチェックする
3. Stack Overflowでよくある問題を確認する
4. 類似のオープンソース実装を調査する

## 出力要件
設計判断に影響を与えるすべての発見事項を共有テンプレートを使用して`research.md`に記録する:
- アーキテクチャ、技術整合性、およびコントラクトに影響を与える重要な洞察
- 調査中に発見された制約
- 推奨アプローチと選択したアーキテクチャパターン（根拠付き）
- 却下された代替案とトレードオフ（設計決定セクションに文書化）
- コンポーネントとインターフェースコントラクトに情報を提供する更新されたドメイン境界
- リスクと軽減策
- 実装中にさらなる調査が必要なギャップ

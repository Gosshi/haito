# 設計レビュープロセス

## 目的
技術設計ドキュメントのインタラクティブな品質レビューを実施し、許容可能なリスクで実装に進められる十分な堅牢性を確保する。

## レビュー哲学
- **完璧を求めるのではなく品質保証**
- **クリティカルフォーカス**: 最も重要な懸念事項を3つに限定
- **インタラクティブな対話**: 一方的な評価ではなく、設計者との対話
- **バランスの取れた評価**: 強みと弱みの両方を認識
- **明確な決定**: 根拠を伴う明確なGO/NO-GO

## スコープと非目標

- スコープ: プロジェクトコンテキストと標準に対して設計ドキュメントの品質を評価し、GO/NO-GOを決定する
- 非目標: 実装レベルの設計、深い技術調査、または技術選択の最終決定は行わない。そのような項目は設計フェーズのイテレーションに委ねる

## コアレビュー基準

### 1. 既存アーキテクチャとの整合性（重要）
- 既存のシステム境界およびレイヤーとの統合
- 確立されたアーキテクチャパターンとの一貫性
- 適切な依存関係の方向と結合管理
- 現在のモジュール構成との整合性

### 2. 設計の一貫性と標準
- プロジェクトの命名規則とコード標準への準拠
- 一貫したエラーハンドリングとロギング戦略
- 統一された設定と依存関係管理
- 確立されたデータモデリングパターンとの整合性

### 3. 拡張性と保守性
- 将来の要件に対する設計の柔軟性
- 関心の明確な分離と単一責任
- テスト可能性とデバッグの考慮
- 要件に対する適切な複雑さ

### 4. 型安全性とインターフェース設計
- 適切な型定義とインターフェースコントラクト
- 安全でないパターン（例: TypeScriptの`any`）の回避
- 明確なAPI境界とデータ構造
- 入力検証とエラーハンドリングのカバレッジ

## レビュープロセス

### ステップ1: 分析
すべてのレビュー基準に対して設計を分析し、統合、保守性、複雑さ、および要件充足に影響を与える重大な問題に焦点を当てる。

### ステップ2: 重大な問題の特定（3つ以下）
各問題について:
```
🔴 **重大な問題 [1-3]**: [簡潔なタイトル]
**懸念事項**: [具体的な問題]
**影響**: [なぜ重要か]
**提案**: [具体的な改善案]
**トレーサビリティ**: [requirements.mdの要件ID/セクション]
**証拠**: [設計ドキュメントのセクション/見出し]
```

### ステップ3: 強みの認識
バランスの取れたフィードバックを維持するために、1〜2つの強い側面を認める。

### ステップ4: GO/NO-GO決定
- **GO**: 重大なアーキテクチャの不整合がない、要件が対応されている、明確な実装パスがある、許容可能なリスク
- **NO-GO**: 根本的な競合、重大なギャップ、高い失敗リスク、不釣り合いな複雑さ

## トレーサビリティと証拠

- 各重大な問題を`requirements.md`の関連する要件（IDまたはセクション）にリンクする
- 評価を裏付ける設計ドキュメント内の証拠の場所（セクション/見出し、図、またはアーティファクト）を引用する
- 該当する場合、ステアリングコンテキストの制約を参照して問題を正当化する

## 出力フォーマット

### 設計レビューサマリー
全体的な品質と準備状況について2〜3文。

### 重大な問題（3つ以下）
各問題について: 問題、影響、推奨事項、トレーサビリティ（例: 1.1, 1.2）、証拠（design.mdセクション）。

### 設計の強み
1〜2つのポジティブな側面。

### 最終評価
決定（GO/NO-GO）、根拠（1〜2文）、次のステップ。

### インタラクティブディスカッション
設計者の視点、代替案、明確化、および必要な変更について対話する。

## 長さとフォーカス

- サマリー: 2〜3文
- 各重大な問題: 合計5〜7行（問題/影響/推奨事項/トレーサビリティ/証拠を含む）
- 全体レビュー: 簡潔に保つ（約400語のガイドライン）

## レビューガイドライン

1. **クリティカルフォーカス**: 成功に大きく影響する問題のみをフラグする
2. **建設的なトーン**: 批判だけでなく解決策を提供する
3. **インタラクティブアプローチ**: 一方的な評価ではなく対話に従事する
4. **バランスの取れた評価**: 強みと弱みの両方を認識する
5. **明確な決定**: 明確なGO/NO-GO推奨を行う
6. **実行可能なフィードバック**: すべての提案が実装可能であることを確認する

## 最終チェックリスト

- **重大な問題 ≤ 3** かつ各問題に影響と推奨事項が含まれている
- **トレーサビリティ**: 各問題が要件ID/セクションを参照している
- **証拠**: 各問題が設計ドキュメントの場所を引用している
- **決定**: 明確な根拠と次のステップを伴うGO/NO-GO

# 並列タスク分析ルール

## 目的
`tasks.md`を生成する際に、安全に並列実行できる実装タスクを特定する一貫した方法を提供する。

## タスクを並列と見なす場合
以下の**すべて**が真の場合にのみ、タスクを並列可能としてマークする:

1. 保留中のタスクへの**データ依存関係がない**
2. **競合するファイルや共有の可変リソースに触れない**
3. 別のタスクからの**前提条件のレビュー/承認が事前に不要**
4. このタスクに必要な**環境/セットアップ作業**が既に満たされているか、タスク自体でカバーされている

## マーキング規約
- 各適格タスクの数値識別子の直後に`(P)`を追加する
  - 例: `- [ ] 2.1 (P) メール用のバックグラウンドワーカーを構築する`
- メジャータスクとサブタスクの両方に適切に`(P)`を適用する
- シーケンシャル実行が要求された場合（例: `--sequential`フラグ）、`(P)`マーカーを完全に省略する
- 完了状態との混同を避けるため、`(P)`をチェックボックスの括弧の**外側**に保つ

## グループ化と順序のガイドライン
- 作業が同じテーマに属する場合は、並列タスクを同じ親の下にグループ化する
- 明らかな前提条件や注意事項を詳細箇条書きにリストする（例: 「1.2のスキーママイグレーションが必要」）
- 2つのタスクが類似して見えるが並列安全でない場合、ブロッキング依存関係を明示的に指摘する
- コンテナのみのメジャータスク（独自のアクション可能な詳細箇条書きがないもの）に`(P)`をマークするのをスキップする—サブタスクレベルで並列実行を評価する

## 品質チェックリスト
タスクに`(P)`をマークする前に、以下を確認したことを確認する:

- このタスクを同時に実行してもマージやデプロイメントの競合が発生しないことを確認
- 共有状態の期待を詳細箇条書きでキャプチャした
- 実装が独立してテストできることを確認した

いずれかのチェックに失敗した場合、タスクに`(P)`を**マークしない**で、タスクの詳細で依存関係を説明する。

---
description: インタラクティブな技術設計品質レビューと検証
allowed-tools: Read, Glob, Grep
argument-hint: <feature-name>
---

# 技術設計検証

<background_information>
- **ミッション**: 実装準備を確保するための技術設計のインタラクティブな品質レビューを実施する
- **成功基準**:
  - 重大な問題を特定（最大3つの最も重要な懸念事項）
  - 強みを認識したバランスの取れた評価
  - 根拠を伴う明確なGO/NO-GO決定
  - 必要に応じて改善のための実行可能なフィードバック
</background_information>

<instructions>
## コアタスク
承認された要件と設計ドキュメントに基づいて機能 **$1** のインタラクティブな設計品質レビュー。

## 実行ステップ

1. **コンテキストのロード**:
   - 言語とメタデータのために`.kiro/specs/$1/spec.json`を読む
   - 要件のために`.kiro/specs/$1/requirements.md`を読む
   - 設計ドキュメントのために`.kiro/specs/$1/design.md`を読む
   - **すべてのステアリングコンテキストをロード**: 以下を含む`.kiro/steering/`ディレクトリ全体を読む:
     - デフォルトファイル: `structure.md`、`tech.md`、`product.md`
     - すべてのカスタムステアリングファイル（モード設定に関係なく）
     - これにより完全なプロジェクトメモリとコンテキストが提供される

2. **レビューガイドラインを読む**:
   - レビュー基準とプロセスのために`.kiro/settings/rules/design-review.md`を読む

3. **設計レビューを実行**:
   - design-review.mdプロセスに従う: 分析 → 重大な問題 → 強み → GO/NO-GO
   - 最も重要な懸念事項を3つに限定
   - ユーザーとインタラクティブに対話
   - 出力にはspec.jsonで指定された言語を使用

4. **決定と次のステップを提供**:
   - 根拠を伴う明確なGO/NO-GO決定
   - 決定に基づいて続行方法をユーザーにガイド

## 重要な制約
- **完璧を求めるのではなく品質保証**: 許容可能なリスクを受け入れる
- **クリティカルフォーカスのみ**: 最大3つの問題、成功に大きく影響するもののみ
- **インタラクティブアプローチ**: 一方的な評価ではなく対話に従事
- **バランスの取れた評価**: 強みと弱みの両方を認識
- **実行可能なフィードバック**: すべての提案が実装可能であること
</instructions>

## ツールガイダンス
- **最初に読む**: レビュー前にすべてのコンテキストをロード（spec、steering、rules）
- **必要に応じてGrep**: パターン検証や統合チェックのためにコードベースを検索
- **インタラクティブ**: レビュープロセス全体を通じてユーザーと対話

## 出力説明
spec.jsonで指定された言語で出力を提供:

1. **レビューサマリー**: 設計品質と準備状況の簡潔な概要（2〜3文）
2. **重大な問題**: 最大3つ、design-review.mdフォーマットに従う
3. **設計の強み**: 1〜2のポジティブな側面
4. **最終評価**: 根拠と次のステップを伴うGO/NO-GO決定

**フォーマット要件**:
- 明確にするためにMarkdown見出しを使用
- design-review.mdの出力フォーマットに従う
- サマリーを簡潔に保つ

## セーフティ＆フォールバック

### エラーシナリオ
- **設計がない**: design.mdが存在しない場合、メッセージで停止: 「最初に`/kiro:spec-design $1`を実行して設計ドキュメントを生成してください」
- **設計が生成されていない**: spec.jsonで設計フェーズが生成としてマークされていない場合、警告するがレビューを続行
- **空のステアリングディレクトリ**: プロジェクトコンテキストがないことを警告し、レビュー品質に影響する可能性があることを伝える
- **言語が未定義**: spec.jsonで言語が指定されていない場合、英語（`en`）にデフォルト

### 次フェーズ: タスク生成

**設計が検証をパスした場合（GO決定）**:
- フィードバックを確認し、必要に応じて変更を適用
- 実装タスクを生成するために`/kiro:spec-tasks $1`を実行
- または自動承認して直接進むために`/kiro:spec-tasks $1 -y`

**設計の修正が必要な場合（NO-GO決定）**:
- 特定された重大な問題に対処
- 改善を加えて`/kiro:spec-design $1`を再実行
- `/kiro:validate-design $1`で再検証

**注記**: 設計検証は推奨されるがオプション。品質レビューは問題を早期にキャッチするのに役立つ。

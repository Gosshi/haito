---
description: 詳細なプロジェクト説明で新しい仕様を初期化する
allowed-tools: Bash, Read, Write, Glob
argument-hint: <project-description>
---

# 仕様初期化

<background_information>
- **ミッション**: 新しい仕様のディレクトリ構造とメタデータを作成し、仕様駆動開発の最初のフェーズを初期化する
- **成功基準**:
  - プロジェクト説明から適切な機能名を生成
  - 競合のないユニークな仕様構造を作成
  - 次のフェーズ（要件生成）への明確なパスを提供
</background_information>

<instructions>
## コアタスク
プロジェクト説明（$ARGUMENTS）からユニークな機能名を生成し、仕様構造を初期化する。

## 実行ステップ
1. **一意性をチェック**: `.kiro/specs/`で命名の競合を確認（必要に応じて数字サフィックスを追加）
2. **ディレクトリを作成**: `.kiro/specs/[feature-name]/`
3. **テンプレートを使用してファイルを初期化**:
   - `.kiro/settings/templates/specs/init.json`を読む
   - `.kiro/settings/templates/specs/requirements-init.md`を読む
   - プレースホルダーを置換:
     - `{{FEATURE_NAME}}` → 生成された機能名
     - `{{TIMESTAMP}}` → 現在のISO 8601タイムスタンプ
     - `{{PROJECT_DESCRIPTION}}` → $ARGUMENTS
   - `spec.json`と`requirements.md`をspecディレクトリに書き込む

## 重要な制約
- この段階では要件/設計/タスクを生成しない
- 段階的な開発原則に従う
- 厳密なフェーズ分離を維持
- このフェーズでは初期化のみを行う
</instructions>

## ツールガイダンス
- 名前の一意性を確認するために既存のspecディレクトリをチェックするには**Glob**を使用
- テンプレート`init.json`と`requirements-init.md`をフェッチするには**Read**を使用
- プレースホルダー置換後にspec.jsonとrequirements.mdを作成するには**Write**を使用
- ファイル書き込み操作の前に検証を実行

## 出力説明
`spec.json`で指定された言語で以下の構造で出力を提供:

1. **生成された機能名**: 1〜2文の根拠付きの`feature-name`形式
2. **プロジェクトサマリー**: 簡潔なサマリー（1文）
3. **作成されたファイル**: フルパス付きの箇条書きリスト
4. **次のステップ**: `/kiro:spec-requirements <feature-name>`を示すコマンドブロック
5. **注記**: 初期化のみが実行された理由の説明（フェーズ分離について2〜3文）

**フォーマット要件**:
- Markdown見出しを使用（##, ###）
- コマンドをコードブロックで囲む
- 総出力を簡潔に保つ（250語以下）
- `spec.json.language`に従って明確でプロフェッショナルな言語を使用

## セーフティ＆フォールバック
- **機能名が曖昧**: 機能名の生成が不明確な場合、2〜3のオプションを提案してユーザーに選択を求める
- **テンプレートが見つからない**: `.kiro/settings/templates/specs/`にテンプレートファイルが存在しない場合、具体的な欠落ファイルパスとともにエラーを報告し、リポジトリのセットアップを確認するよう提案
- **ディレクトリ競合**: 機能名が既に存在する場合、数字サフィックスを追加（例: `feature-name-2`）し、ユーザーに自動競合解決を通知
- **書き込み失敗**: 具体的なパスとともにエラーを報告し、権限またはディスク容量の確認を提案

---
description: 専門的なプロジェクトコンテキスト用のカスタムステアリングドキュメントを作成する
allowed-tools: Bash, Read, Write, Edit, MultiEdit, Glob, Grep, LS
---

# Kiroカスタムステアリング作成

<background_information>
**役割**: コアファイル（product、tech、structure）以外の専門的なステアリングドキュメントを作成する。

**ミッション**: 専門領域向けのドメイン固有のプロジェクトメモリを作成するのを支援する。

**成功基準**:
- カスタムステアリングが専門的なパターンをキャプチャ
- コアステアリングと同じ粒度の原則に従う
- 特定のドメインに明確な価値を提供
</background_information>

<instructions>
## ワークフロー

1. **ユーザーに確認**カスタムステアリングのニーズ:
   - ドメイン/トピック（例: 「API標準」、「テストアプローチ」）
   - 文書化する特定の要件またはパターン

2. **テンプレートが存在するか確認**:
   - 利用可能な場合は`.kiro/settings/templates/steering-custom/{name}.md`からロード
   - 出発点として使用し、プロジェクトに基づいてカスタマイズ

3. **コードベースを分析**（JIT）関連パターン:
   - 関連ファイルに**Glob**
   - 既存実装に**Read**
   - 特定のパターンに**Grep**

4. **カスタムステアリングを生成**:
   - 利用可能な場合はテンプレート構造に従う
   - `.kiro/settings/rules/steering-principles.md`からの原則を適用
   - 網羅的リストではなくパターンに集中
   - 100〜200行に保つ（2〜3分の読み）

5. **ファイルを作成**`.kiro/steering/{name}.md`に

## 利用可能なテンプレート

`.kiro/settings/templates/steering-custom/`で利用可能なテンプレート:

1. **api-standards.md** - REST/GraphQL規約、エラーハンドリング
2. **testing.md** - テスト組織、モッキング、カバレッジ
3. **security.md** - 認証パターン、入力検証、シークレット
4. **database.md** - スキーマ設計、マイグレーション、クエリパターン
5. **error-handling.md** - エラータイプ、ロギング、リトライ戦略
6. **authentication.md** - 認証フロー、権限、セッション管理
7. **deployment.md** - CI/CD、環境、ロールバック手順

必要に応じてテンプレートをロードし、プロジェクト用にカスタマイズ。

## ステアリング原則

`.kiro/settings/rules/steering-principles.md`より:

- **リストよりパターン**: すべてのファイル/コンポーネントではなくパターンを文書化
- **単一ドメイン**: ファイルごとに1つのトピック
- **具体的な例**: パターンをコードで示す
- **保守可能なサイズ**: 通常100〜200行
- **セキュリティ優先**: シークレットや機密データを含めない

</instructions>

## ツールガイダンス

- **Read**: テンプレートのロード、既存コードの分析
- **Glob**: パターン分析のための関連ファイルを見つける
- **Grep**: 特定のパターンを検索
- **LS**: 関連構造を理解

**JIT戦略**: そのタイプのステアリングを作成する場合にのみテンプレートをロード。

## 出力説明

ファイルの場所を含むチャットサマリー（ファイルは直接作成）。

```
✅ カスタムステアリング作成完了

## 作成:
- .kiro/steering/api-standards.md

## 基盤:
- テンプレート: api-standards.md
- 分析: src/api/ ディレクトリパターン
- 抽出: REST規約、エラーフォーマット

## 内容:
- エンドポイント命名パターン
- リクエスト/レスポンスフォーマット
- エラーハンドリング規約
- 認証アプローチ

必要に応じて確認・カスタマイズしてください。
```

## 例

### 成功: API標準
**入力**: 「API標準ステアリングを作成」
**アクション**: テンプレートをロード、src/api/を分析、パターンを抽出
**出力**: プロジェクト固有のREST規約を含むapi-standards.md

### 成功: テスト戦略
**入力**: 「テストアプローチを文書化」
**アクション**: テンプレートをロード、テストファイルを分析、パターンを抽出
**出力**: テスト組織とモッキング戦略を含むtesting.md

## セーフティ＆フォールバック

- **テンプレートなし**: ドメイン知識に基づいてゼロから生成
- **セキュリティ**: シークレットを含めない（原則をロード）
- **検証**: コアステアリングの内容と重複しないことを確認

## 注記

- テンプレートは出発点、プロジェクト用にカスタマイズ
- コアステアリングと同じ粒度の原則に従う
- すべてのステアリングファイルがプロジェクトメモリとしてロードされる
- カスタムファイルはコアファイルと同等に重要
- エージェント固有のツールディレクトリ（例: `.cursor/`、`.gemini/`、`.claude/`）の文書化は避ける
- `.kiro/specs/`と`.kiro/steering/`への軽い参照は許容; 他の`.kiro/`ディレクトリは避ける
